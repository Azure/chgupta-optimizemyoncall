{
  "bv": 10,
  "component": "Crashes",
  "computedMetrics": null,
  "deleted": false,
  "description": null,
  "dimensions": null,
  "displayName": null,
  "enableClientEtwPublication": true,
  "enableClientSideForking": true,
  "enableClientSideLastSamplingMode": false,
  "enableClientSidePublication": true,
  "id": "CrashOccurred",
  "isFromNewPipeline": false,
  "isQosMetric": false,
  "metrics": null,
  "monitors": [
    {
      "category": "",
      "conditions": [
        [
          "Cloud",
          "Public",
          ""
        ],
        [
          "Environment",
          "Prod",
          ""
        ],
        [
          "MdsNamespace",
          "csm*",
          "",
          "w"
        ],
        [
          "Role",
          "Frontdoor.Web.razzle,Frontdoor.Admin.razzle,Frontdoor.Worker.razzle,StorageOperations.Replicator.Platform.razzle",
          ""
        ]
      ],
      "customLinks": [
        {
          "$type": "Microsoft.Online.Metrics.Common.EventConfiguration.DashboardConfiguration, Microsoft.Online.Metrics.Common",
          "accountName": "ARM",
          "autoExecute": false,
          "dimensionsToOverride": [
            "Cloud",
            "Environment",
            "MdsNamespace",
            "Role"
          ],
          "executionDelay": "00:00:00",
          "lookbackDuration": "1.00:00:00",
          "name": null,
          "namespace": null,
          "path": [
            "Crashes"
          ],
          "preIncidentQueryTimeout": "00:00:50",
          "title": "Crashes",
          "type": "Dashboard"
        },
        {
          "$type": "Microsoft.Online.Metrics.Common.EventConfiguration.DashboardConfiguration, Microsoft.Online.Metrics.Common",
          "accountName": "ARM",
          "autoExecute": true,
          "dimensionsToOverride": [
            "Cloud",
            "Environment",
            "MdsNamespace",
            "Role"
          ],
          "executionDelay": "00:00:00",
          "lookbackDuration": "12:00:00",
          "name": null,
          "namespace": null,
          "path": [
            "Crashes",
            "Investigating crashes"
          ],
          "preIncidentQueryTimeout": "00:00:50",
          "title": "TSG",
          "type": "Dashboard"
        },
        {
          "$type": "Microsoft.Online.Metrics.Common.EventConfiguration.KustoJarvisLink, Microsoft.Online.Metrics.Common",
          "autoExecute": true,
          "compressQuery": true,
          "database": "ARMProd",
          "endpoint": "https://armprod.kusto.windows.net",
          "executionDelay": "00:01:00",
          "maxResultRowCount": 15,
          "preIncidentQueryTimeout": "00:00:50",
          "query": "Service\n| where TIMESTAMP > datetime({StartTime})\n| where SourceNamespace == \"{Monitor.Dimension.MdsNamespace}\"\n| where Role == \"{Monitor.Dimension.Role}\"\n| where TaskName == \"ServiceStarting\"\n| summarize LatestRestart = max(TIMESTAMP), RestartCount = count() by RoleInstance\n| summarize InstanceCount = dcount(RoleInstance), (ExampleInstance, ExampleInstanceLatestRestart) = any(RoleInstance, LatestRestart) by RestartCount\n| order by RestartCount desc",
          "title": "Role restarts",
          "type": "Kusto"
        },
        {
          "$type": "Microsoft.Online.Metrics.Common.EventConfiguration.GenericCustomLink, Microsoft.Online.Metrics.Common",
          "autoExecute": false,
          "executionDelay": "00:00:00",
          "link": "https://aka.ms/azurewatson?MdsMANamespace=REPLACE_WITH_SOURCENAMESPACE&Role=REPLACE_WITH_ROLE",
          "preIncidentQueryTimeout": "00:00:50",
          "title": "Azure Watson",
          "type": "Custom"
        }
      ],
      "customMessage": "An anomalously high crash rate was detected for the [{Monitor.Dimension.Role}] role in source namespace [{Monitor.Dimension.MdsNamespace}]. This means that the rate of detected role crashes has increased above a historically-determined baseline. The cause of these crashes should be investigated. Azure Watson's dashboard is usually the best place to start: https://aka.ms/azurewatson?MdsMANamespace={Monitor.Dimension.MdsNamespace}&Role={Monitor.Dimension.Role}",
      "customTitle": "Crash rate anomaly for role [{Monitor.Dimension.Role}] in namespace [{Monitor.Dimension.MdsNamespace}]",
      "dashboardName": "",
      "dashboardNamespace": "",
      "description": "This monitor detects anomalous increases in the rate of role crashes for a given region (source namespace) and role, as detected by Azure Watson. \n\nWhile the causes of crashes can vary from software bugs to hardware faults, in general it is important for us to fully investigate the source and impact of crashes. Often, the full user impact of role crashes is significantly worse than it appears from our metrics, because a crashed role will drop metrics.",
      "desiredConditions": null,
      "eventIdentifier": {
        "component": "Crashes",
        "id": "CrashOccurred",
        "tenant": "ARM"
      },
      "explicitPreAgg": null,
      "frequency": "00:05:00",
      "healthyCountToMitigateIncident": 10,
      "healthyDurationToMitigateIncident": "00:45:00",
      "hintsLookbackDuration": "1.00:00:00",
      "id": "Role_Crashes",
      "ingestionDelay": "00:00:00",
      "inputResourceType": "",
      "isDisabled": false,
      "isRegularMonitor": true,
      "isSilent": false,
      "isThrottled": false,
      "lastUpdatedBy": "lidwang",
      "lastUpdateTime": "2020-06-19T00:29:52.5708543Z",
      "lookbackDuration": "00:30:00",
      "metadata": [],
      "metricsViewName": "",
      "monitorActorConfiguration": {
        "additionalDataForMonitorsEnabled": false,
        "azureCacheTimeToExclude": "00:00:00",
        "baselineConcurrentGetAnomalyCallsV2": 0,
        "baselineFastServiceUri": null,
        "baselineFastServiceUriForAzure": null,
        "baselineIsAnomalyBatchProcessingSize": 0,
        "baselineServiceUri": null,
        "baselineServiceUriForAzure": null,
        "baselineServiceUseQueryService": false,
        "baselineUiFacingServiceUri": null,
        "baselineUiFacingServiceUriForAzure": null,
        "baseReportExpirationTimeInSeconds": 0,
        "batchReportingMonitor": false,
        "cacheTimeToExclude": "00:00:00",
        "cadMaxCombinationsEvaluationThreshold": 0,
        "certificateIdentifier": null,
        "certificateThumbprint": null,
        "combinationDeltaFetchLookback": "00:00:00",
        "combinationRefreshMinInterval": "00:00:00",
        "combinationsChunkSizePerConcurrentEvaluateBlock": 0,
        "consecutiveMonitorTimeoutsForAlerting": 0,
        "customizeSeverityForMonitorExecutionFailure": false,
        "debug": false,
        "disabled": false,
        "disableMetricDataInAlerts": false,
        "dqConcurrencyConfiguration": null,
        "dynamicThresholdMaxCombinationsEvaluationThreshold": 0,
        "enableCombinationsThrottlingForCad": false,
        "enableCostReporting": false,
        "enableDictionaryBasedMetricsSourceMatching": false,
        "enableGroupingByCommonDimensions": false,
        "enableHealthMonitors": false,
        "enableMonitorTimeoutAlerts": false,
        "enableQueryServiceQosMetricSupport": false,
        "enableSelectPreaggregate": false,
        "enableSubmitMetricsFromJs": false,
        "evaluatorTimeout": "00:00:00",
        "fetchDeltaHints": false,
        "hasUserConfigCacheTimeToExclude": null,
        "hintLookbackDuration": "00:00:00",
        "includeTimeSeriesInformationInWatchdogMetadata": false,
        "isThirdPartyStamp": false,
        "kenshoServiceUri": null,
        "logCombinationsInfo": false,
        "maxBufferSizeForRetrievedData": 0,
        "maxCombinationsCountPerPartition": 0,
        "maxCombinationsEvaluationThreshold": 0,
        "maxCombinationsForDataSources": 0,
        "maxCombinationsForMetricSources": 0,
        "maxConcurrentRetrieveOperations": 0,
        "maxDegreeOfParallelismForEvaluateBlock": 0,
        "maxFetchMetricsInJs": 0,
        "minCombinationsCountToRequirePartition": 0,
        "notQueryMetricsSourceCombinationIfNoWildcard": false,
        "overrideHealthDataValidation": false,
        "overrideMetricDataValidation": false,
        "partnerClientCertificateIdentifier": null,
        "preferMetricsStore": false,
        "preventCombinationsOverwriteByDeltaRefresh": false,
        "previewWithHistoricData": false,
        "removeExtraIngestionDelayInExecution": false,
        "removeExtraQueryComparison": false,
        "resourceTypeOverride": null,
        "treatInheritNotAsWildcard": false,
        "useAccountMigrationSupport": false,
        "useDefaultAzureMonitorLatency": false,
        "useHealthService": false,
        "useInternalHintingApi": false,
        "useLatestQueryRequestSerializationVersion": false,
        "useLowLatencyPipelineDataQualityForAzureMonitor": false,
        "useMetricsStoreMigrationSupport": false,
        "useNewHintingApi": false,
        "useNewMonitorTemplateInterface": false,
        "useNewMonitorTemplateInterfaceForDynamicThreshold": false,
        "useOptimizedMetricFetch": false,
        "useQueryServiceBatching": false,
        "useQueryServiceBatchingForJs": false,
        "useQueryServiceForCrossStampQuery": false,
        "useQueryServiceInMdmDataQualityClient": false,
        "useResolutionForAnomalyTimeWindowLookback": false,
        "zeroAsNoValueSentinel": false
      },
      "monitorDataSourceType": 0,
      "raiseIncientOnMonitorFailure": null,
      "resourceType": "SourceNamespaceRole",
      "severityForMonitorFailure": 0,
      "shouldMitigateIncident": true,
      "shouldSendToAutomation": false,
      "templateConfiguration": {
        "alertOnDivideByZero": false,
        "baselineAnomalyTemplate": {
          "alwaysTryTrain": false,
          "alwaysUseBaselineService": true,
          "anomalyEvaluationData": "",
          "anomalyEvaluationType": 1,
          "anomalyResultType": 1,
          "armMetricDimensions": null,
          "armMetricName": null,
          "armResourceId": null,
          "armRuleId": null,
          "armSpecificInformation": null,
          "baselineModelId": "",
          "baselineServiceCustomData": null,
          "bucketSize": "00:05:00",
          "maxCombinationsEvaluationThreshold": null,
          "maxConcurrentDataRetrievals": null,
          "multipointsAnomalyFeatureFlag": true,
          "resourceGroup": "JarvisResourceGroup",
          "sensitivity": "Medium",
          "shouldTrainInternally": null,
          "staticThresholdMax": null,
          "staticThresholdMin": null,
          "subscriptionId": "JarvisSubscription",
          "thresholdDirection": 0,
          "timeSeries": {
            "dataSourceType": 0,
            "fetchMetrics": {
              "aggregateType": 0,
              "conditions": [],
              "dataSourceType": 0,
              "endTimeShift": "00:00:00",
              "isNegative": false,
              "lookbackDuration": "00:00:00",
              "metric": "CrashOccurred",
              "metricsSourceAggregateType": 0,
              "monitoringAccount": "ARM",
              "namespace": "Crashes",
              "samplingType": "Count",
              "useTotalAggregate": false
            }
          },
          "trainingStartTime": null,
          "trainingWindow": null,
          "zScoreThreshold": 0.0
        },
        "divideByZeroNotFailure": false,
        "skipOnNoData": false,
        "templateType": 13,
        "valueOnDivideByZero": 0
      },
      "templateSpecificParameters": {
        "_DUMMY_PROPERTY_": "Dummy"
      },
      "templateType": 13,
      "tenantName": "",
      "thresholds": [
        {
          "comparator": ">",
          "healthStatus": 1,
          "severity": 3,
          "value": 0.0
        }
      ],
      "version": 8
    }
  ],
  "pendingMetricsOrderingFix": false,
  "preferQueryMetricsStore": null,
  "replicationState": 0,
  "tenant": "ARM",
  "treatMissingSeriesAsZeros": false,
  "version": 0,
  "views": null
}